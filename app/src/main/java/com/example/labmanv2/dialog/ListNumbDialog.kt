package com.example.labmanv2.dialog

import MyViewModelFactory
import android.app.Application
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.Button
import android.widget.TextView
import androidx.fragment.app.DialogFragment
import androidx.lifecycle.ViewModelProvider
import com.example.labmanv2.R
import roomdb.Student
import roomdb.StudentGroupViewModel

class ListNumbDialog(var type: Int, var stId: Int): DialogFragment()  {
    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
        var view: View = inflater.inflate(R.layout.dialog_fragment_custom, container, false)
        var title: TextView = view.findViewById(R.id.textViewList)
        var picker: TextView = view.findViewById(R.id.listText)
        var butt: Button? = view.findViewById(R.id.pick_button2)

        var vm: StudentGroupViewModel =  ViewModelProvider(this, MyViewModelFactory(this.activity?.application as Application))[StudentGroupViewModel::class.java]
        var st: Student? = vm.getById(stId)
        var arList: MutableList<String>? = null
        when(type){
            1 ->{
                arList = st?.labs?.toMutableList()
                title.text="Labs:"
            }
            2->{
                arList = st?.tests?.toMutableList()
                title.text="Tests:"
            }
            3->{
                arList = st?.cws?.toMutableList()
                title.text="CWs:"
            }
        }
        if(arList!![0]!! ==""){
            picker.maxLines = 70
            picker.textSize = 4F
            picker.text = "-------------------------------------------------------:-------------------------------------------\n" +
                    "---------------------------------------:-----------------------------------------------------------\n" +
                    "----------------------------------------::---::--::-----::-------:::-------------------------------\n" +
                    "---------------------------------------::+%@%%%@######@###@@%%==::---------------------------------\n" +
                    "-----------------------::-:-------:+%@@@@%%@##@@##@@@##@@@#@@@@##@%+:------------------------------\n" +
                    "-----------------------::-:*=@#@@@@@@@######@@@@#@@@@@@@@@@@%@@@@@##@=*:---------------------------\n" +
                    "---------------------:--+@@@#@@%@@@@########@@@@@###@@@#@@#########@@@##@+--:---------::-----------\n" +
                    "-------------------:--*@@%@@%@@@@@@###@@@#######@@@@######################@+----.-::---------------\n" +
                    "-----------------.--+%#@#####@@@@##@@%@@##################@##################=*.-:--:--------------\n" +
                    "------------------*%##@#####@@@@%%======+==%%@@@@@@#@##########################%:------------------\n" +
                    "-----------------:%#########@%%=*****:::::::::**:**+++**++=%%%@@@@##############@*-:.-:------------\n" +
                    "----------------:+#########%=++*****:::::::::::::::::::::::::::::::*+=@###########=-:--------------\n" +
                    "----------------=########@=++******:::::::::::::::::::::::::::::::::::::+@########@@*--------------\n" +
                    "---------------*########@%+++********::::::::::::::::::::::::::::::***:*::+%#########@-------------\n" +
                    "--------------*@#######@%=+************:::::::::::::::::::::::::::***:*****:*%#####@#@=------------\n" +
                    "-------------:@########@==+************:::::::::::::::::::::::::***********+++=@#######=:----------\n" +
                    "--------:.:--*#######@%%+++*********::::::::::::::::::::::::::::::*******++*++=%@#######%.:--------\n" +
                    "-------------*#######@%++++********::::::::::::::::::::::::::::::::*******+++++=@########+---------\n" +
                    "------------:@######@=+++++**::**:::****::::::::::::::::::::::::::::***:****++++%@#######@+--------\n" +
                    "-----------:+######@=+++**++===%%%======++++******************************+++*++=@########@+-------\n" +
                    "----------:+%=%####%*+++=%%%%%%==%%@####@@@%%======+++++==%%@@@@@@@@@@@@@%%%=++++=########@#-------\n" +
                    "----------=@==@###@=++++===+++++===%%%@@@%%@@%%%========%@@@#@@@@%@%=+++===%%%=+*+@########@+:-----\n" +
                    "----------:==%%###%+++++++=%%@##@%@###@%@@#@@#@%=+++++==@@@@#@###@#@%@@@==++++++*+%########@#+-----\n" +
                    "---------:-*=+%@#@=+++++**+++++++++======%@@%%%%+*::::+==%@@@%==%@@%==%@@@%=++++**%@#######@#@:----\n" +
                    "-----------:**=%@@=*+++*******+=%%%@@@@@%%==+++++*::::*+==%%%@@%==++====+*****++*+=@########@#+----\n" +
                    "---------.:**+%%@%+**********::::******::*********::::*+*****+==%%===+**::*******+=@#@@@##@#@#%:---\n" +
                    "----------*=+*%+=%=+******::::::::-:::::::********::::******::::::::*::::*******+*=@#@@###@#@@@*---\n" +
                    "---------.:=+*:**==++*****::::::::::****=++*+++**:::::********:::::---::::::***+++%@@@%@###@@@@=:--\n" +
                    "----------*=%*:*++=+*********::::***+%%===*****:::::::::****+==++*:::::*:::****+*+===%@@###@@@@@=*-\n" +
                    "---------:=@#@%+**++*+*+*******+++=%%=++=++++=**:***********+====%=+************++=+%%@##@@#@@@@@=-\n" +
                    "-------:+%@#######@+*+**+**++*++%@@%====%%=%##@%+++++++*==%==+++==%%=++**+++++***+++%@##@@###@@@@=:\n" +
                    "------+%##@#@#@####++++++*++++=%@@@@@@%==%@@######@%%@@####@===%=%%@@%=++++*****+%#####@#@###@@@@%+\n" +
                    "-.---*%@@@@@#######%++++++++++=%@@@@@%@@%%==%=%=+==%%%=@%%@%====%@@@#@%+*++++++++@#######@@##@@@@@@\n" +
                    "-:--*%@@############=++++++++**+=====%@#%=+**:++**++++%*+%*=@###@@@@%=++++++++++%########@@@#@@@@@@\n" +
                    "--*=%@###############%=+=+++++++**+++****+=====+**::**===@==+++++++++*++++++++=@#########@@@##@@@@@\n" +
                    ":+@@@@##@#############@%=+++++++***********+++++++*****++++*:*++***++++=+=++==@#########@##@@#@@@@@\n" +
                    "@@@@####################%==+++++++*********+++======++++++***+****++======%%@############@@@####@@%\n" +
                    "@@######################%=%===+++++**********+++=====++++++******++++===%%%###############@@###@#@@\n" +
                    "########@###############%==========+******:::::::::::***********++===%%%@%@############@#@@######@@\n" +
                    "########################%=====%%%%%==+++++***::::::::::*::****++==%%@@@%%%@##############@@######@@\n" +
                    "@#######################@========%%%%%%=====++*++**+++++++====%%@@@@%%%%%@###############@@######@@\n" +
                    "########################%=========%%%%%%%%%%%%=%%==%%%%%%%%%%@@@@@%%%%%%##################@@#####@@\n" +
                    "########################@===========%%%%%%%%%%%%%%%%%%%@%@@@%%%%%%%=%%%@##################%@######@\n" +
                    "#########################@%===========%%%%%%%%%%%%%%%%%%%%%%%%%%=====%@@@#################@@#######\n" +
                    "#######################@#@@%%===========%%==%%%%%%%%%%%%%%%%%========%@@@##################@@@#####\n" +
                    "##########################@@%%======================================%@@@####################@@#@###\n" +
                    "###########################@@%%%====================================%@@@##################@#@@@@##@\n" +
                    "###@@#######################@@%%%%%================================%%@@%##################@#@@@@@%=\n"
        }
        else{
            picker.text = arList.toString()
        }

        butt?.setOnClickListener {
            this.dismiss()
        }

        return view

    }
}